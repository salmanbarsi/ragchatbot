{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nxtjs/rag-chatbot/src/lib/db-config.ts"],"sourcesContent":["import { drizzle } from \"drizzle-orm/neon-http\";\r\nimport { neon } from \"@neondatabase/serverless\";\r\nimport {config} from 'dotenv';\r\n\r\nconfig({path: '.env.local'});\r\nconst client = neon(process.env.NEON_DATABASE_URL!);\r\nexport const db = drizzle(client);\r\n\r\nexport default db;"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,IAAA,+IAAM,EAAC;IAAC,MAAM;AAAY;AAC1B,MAAM,SAAS,IAAA,8JAAI,EAAC,QAAQ,GAAG,CAAC,iBAAiB;AAC1C,MAAM,KAAK,IAAA,mKAAO,EAAC;uCAEX"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nxtjs/rag-chatbot/src/lib/db-schema.ts"],"sourcesContent":["import { pgTable, serial, text, vector, index } from \"drizzle-orm/pg-core\";\r\n\r\nexport const documents = pgTable(\r\n  \"documents\",\r\n  {\r\n    id: serial(\"id\").primaryKey(),\r\n    content: text(\"content\").notNull(),\r\n    embedding: vector(\"embedding\", { dimensions: 1536 }),\r\n  },\r\n  (table) => [\r\n    index(\"embeddingIndex\").using(\r\n      \"hnsw\",\r\n      table.embedding.op(\"vector_cosine_ops\")\r\n    ),\r\n  ]\r\n);\r\n\r\nexport type InsertDocument = typeof documents.$inferInsert;\r\nexport type SelectDocument = typeof documents.$inferSelect;"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEO,MAAM,YAAY,IAAA,gKAAO,EAC9B,aACA;IACE,IAAI,IAAA,2KAAM,EAAC,MAAM,UAAU;IAC3B,SAAS,IAAA,uKAAI,EAAC,WAAW,OAAO;IAChC,WAAW,IAAA,+LAAM,EAAC,aAAa;QAAE,YAAY;IAAK;AACpD,GACA,CAAC,QAAU;QACT,IAAA,gKAAK,EAAC,kBAAkB,KAAK,CAC3B,QACA,MAAM,SAAS,CAAC,EAAE,CAAC;KAEtB"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nxtjs/rag-chatbot/src/lib/embeddings.ts"],"sourcesContent":["import { embed, embedMany } from \"ai\";\r\nimport { createOpenRouter } from \"@openrouter/ai-sdk-provider\";\r\n\r\nconst openrouter = createOpenRouter({\r\n  apiKey: process.env.OPENROUTER_API_KEY!,  \r\n});\r\n\r\nexport async function genrateEmbeddings(text: string) {\r\n    const input = text.replace(\"\\n\", \" \");\r\n\r\n    const { embedding } = await embed({\r\n        model: openrouter.textEmbeddingModel(\"nvidia/nemotron-nano-12b-v2-vl:free\"),\r\n        value: input,\r\n    });\r\n    return embedding;\r\n}\r\n\r\nexport async function genrateEmbeddingsMany(texts: string[]) {\r\n    const inputs = texts.map((text) => text.replace(\"\\n\", \" \"));\r\n    const { embeddings } = await embedMany({\r\n        model: openrouter.textEmbeddingModel(\"nvidia/nemotron-nano-12b-v2-vl:free\"),\r\n        values: inputs,\r\n    });\r\n    return embeddings;\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,aAAa,IAAA,2LAAgB,EAAC;IAClC,QAAQ,QAAQ,GAAG,CAAC,kBAAkB;AACxC;AAEO,eAAe,kBAAkB,IAAY;IAChD,MAAM,QAAQ,KAAK,OAAO,CAAC,MAAM;IAEjC,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAA,6JAAK,EAAC;QAC9B,OAAO,WAAW,kBAAkB,CAAC;QACrC,OAAO;IACX;IACA,OAAO;AACX;AAEO,eAAe,sBAAsB,KAAe;IACvD,MAAM,SAAS,MAAM,GAAG,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,MAAM;IACtD,MAAM,EAAE,UAAU,EAAE,GAAG,MAAM,IAAA,iKAAS,EAAC;QACnC,OAAO,WAAW,kBAAkB,CAAC;QACrC,QAAQ;IACZ;IACA,OAAO;AACX"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nxtjs/rag-chatbot/src/lib/chunking.ts"],"sourcesContent":["import { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\r\n\r\nexport const textSplitter = new RecursiveCharacterTextSplitter({\r\n    chunkSize: 150,\r\n    chunkOverlap: 20,\r\n    separators: [\"\"],\r\n});\r\n\r\nexport async function chunkcontent(content: string) {\r\n    return await textSplitter.splitText(content.trim());\r\n}"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,MAAM,eAAe,IAAI,uMAA8B,CAAC;IAC3D,WAAW;IACX,cAAc;IACd,YAAY;QAAC;KAAG;AACpB;AAEO,eAAe,aAAa,OAAe;IAC9C,OAAO,MAAM,aAAa,SAAS,CAAC,QAAQ,IAAI;AACpD"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nxtjs/rag-chatbot/src/app/upload/actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport {pdf} from \"pdf-parse\";\r\nimport { db } from '@/lib/db-config';\r\nimport { documents } from '@/lib/db-schema';\r\nimport { genrateEmbeddings, genrateEmbeddingsMany } from '@/lib/embeddings';\r\nimport { chunkcontent } from '@/lib/chunking';\r\nimport { tr } from \"zod/v4/locales\";\r\n\r\nexport async function processpdfFile(formData: FormData) {\r\n    try {\r\n        const file = formData.get(\"pdf\") as File; \r\n\r\n        const bytes = await file.arrayBuffer();\r\n        const buffer = Buffer.from(bytes);\r\n        const data = await pdf(buffer);\r\n\r\n        if (!data.text || data.text.trim().length === 0) {\r\n            return {\r\n                success: false,\r\n                error: \"The uploaded PDF file contains no extractable text.\"\r\n            }\r\n        }\r\n\r\n        const chunks = await chunkcontent(data.text);\r\n        const embeddings = await genrateEmbeddingsMany(chunks);\r\n\r\n        const record = chunks.map((chunk, index) => ({\r\n            content: chunk,\r\n            embedding: embeddings[index],\r\n        }));\r\n        await db.insert(documents).values(record);\r\n\r\n        return ({\r\n            success: true,\r\n            message: \"PDF file processed and data stored successfully.\" \r\n        })\r\n    }\r\n    catch (error) {\r\n        console.error(\"Error processing PDF file:\", error);\r\n        return {\r\n            success: false,\r\n            error: \"Failed to process PDF file.\"\r\n        }\r\n    }\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAGO,eAAe,eAAe,QAAkB;IACnD,IAAI;QACA,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,MAAM,QAAQ,MAAM,KAAK,WAAW;QACpC,MAAM,SAAS,OAAO,IAAI,CAAC;QAC3B,MAAM,OAAO,MAAM,IAAA,+HAAG,EAAC;QAEvB,IAAI,CAAC,KAAK,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI,GAAG,MAAM,KAAK,GAAG;YAC7C,OAAO;gBACH,SAAS;gBACT,OAAO;YACX;QACJ;QAEA,MAAM,SAAS,MAAM,IAAA,sIAAY,EAAC,KAAK,IAAI;QAC3C,MAAM,aAAa,MAAM,IAAA,iJAAqB,EAAC;QAE/C,MAAM,SAAS,OAAO,GAAG,CAAC,CAAC,OAAO,QAAU,CAAC;gBACzC,SAAS;gBACT,WAAW,UAAU,CAAC,MAAM;YAChC,CAAC;QACD,MAAM,gIAAE,CAAC,MAAM,CAAC,uIAAS,EAAE,MAAM,CAAC;QAElC,OAAQ;YACJ,SAAS;YACT,SAAS;QACb;IACJ,EACA,OAAO,OAAO;QACV,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;YACH,SAAS;YACT,OAAO;QACX;IACJ;AACJ;;;IApCsB;;AAAA,+OAAA"}}]
}